{
  "description": "created by galiu@pivotal.io",
  "created": "2015-11-20T22:10:20.066572+00:00",
  "title": "elk by gary",
  "modified": "2016-01-15T22:59:17.453810+00:00",
  "graphs": [
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:aws.ec2.network_in{deployment:cf-elk-3az} by {index,job} * 0.1333",
            "conditional_formats": [

            ],
            "type": "line"
          }
        ]
      },
      "title": "network in -all"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:aws.ec2.network_out{deployment:cf-elk-3az} by {index,job} *0.1333",
            "conditional_formats": [

            ],
            "type": "line"
          }
        ]
      },
      "title": "network out -all job"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:aws.ec2.network_in{deployment:cf-elk-3az,job:ingestor_z1} by {index} *0.1333",
            "conditional_formats": [

            ],
            "type": "line"
          },
          {
            "q": "avg:aws.ec2.network_in{deployment:cf-elk-3az,job:ingestor_z2} by {index} *0.1333",
            "type": "line"
          },
          {
            "q": "avg:aws.ec2.network_in{deployment:cf-elk-3az,job:ingestor_z3} by {index} *0.1333",
            "type": "line"
          },
          {
            "q": "avg:aws.ec2.network_in{deployment:cf-elk-3az,name:elb_log_to_logstash_z2/0} by {index} *0.1333",
            "type": "line"
          }
        ]
      },
      "title": "net_in on ingestors"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:aws.ec2.network_in{deployment:cf-elk-3az,job:queue_z1} by {index} *0.1333",
            "conditional_formats": [

            ],
            "type": "line"
          },
          {
            "q": "avg:aws.ec2.network_in{deployment:cf-elk-3az,job:queue_z2} by {index} *0.1333",
            "type": "line"
          },
          {
            "q": "avg:aws.ec2.network_in{deployment:cf-elk-3az,job:queue_z3} by {index} *0.1333",
            "type": "line"
          }
        ]
      },
      "title": "net_in  of queues"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:aws.ec2.network_out{deployment:cf-elk-3az,job:queue_z1} by {index} *0.1333",
            "conditional_formats": [

            ],
            "type": "line"
          },
          {
            "q": "avg:aws.ec2.network_out{deployment:cf-elk-3az,job:queue_z2} by {index} *0.1333",
            "type": "line"
          },
          {
            "q": "avg:aws.ec2.network_out{deployment:cf-elk-3az,job:queue_z3} by {index} *0.1333",
            "type": "line"
          }
        ]
      },
      "title": "net out - queues"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "sum:aws.ec2.network_out{deployment:cf-elk-3az,job:log_parser_z1} *0.1333",
            "conditional_formats": [

            ],
            "type": "line"
          },
          {
            "q": "sum:aws.ec2.network_out{deployment:cf-elk-3az,job:log_parser_z2} *0.1333",
            "type": "line"
          },
          {
            "q": "sum:aws.ec2.network_out{deployment:cf-elk-3az,job:log_parser_z3} *0.1333",
            "type": "line"
          }
        ]
      },
      "title": "net out - from log parser to es"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.swap.percent{deployment:cf-elk-3az,job:queue_z2}",
            "conditional_formats": [

            ],
            "type": "line"
          },
          {
            "q": "avg:bosh.healthmonitor.system.mem.percent{deployment:cf-elk-3az,job:queue_z1}",
            "type": "line"
          },
          {
            "q": "avg:bosh.healthmonitor.system.mem.percent{deployment:cf-elk-3az,job:queue_z2}",
            "type": "line"
          },
          {
            "q": "avg:bosh.healthmonitor.system.mem.percent{deployment:cf-elk-3az,job:queue_z3}",
            "type": "line"
          },
          {
            "q": "avg:bosh.healthmonitor.system.disk.persistent.percent{deployment:cf-elk-3az,job:queue_z3}",
            "type": "line"
          }
        ]
      },
      "title": "mem & swap on queue"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.cpu.user{!job:log_parser_z1,!job:log_parser_z2,!job:log_parser_z3,deployment:cf-elk-3az} by {job,index}",
            "type": "line"
          }
        ]
      },
      "title": "cpu (excluding parser)"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.cpu.user{deployment:cf-elk-3az,job:log_parser_z2} by {index}",
            "type": "line"
          },
          {
            "q": "avg:bosh.healthmonitor.system.cpu.user{deployment:cf-elk-3az,job:log_parser_z1} by {index}",
            "type": "line"
          },
          {
            "q": "avg:bosh.healthmonitor.system.cpu.user{deployment:cf-elk-3az,job:log_parser_z3} by {index}",
            "type": "line"
          }
        ]
      },
      "title": "cpu on log_parsers"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "sum:aws.elb.request_count{host:cf-elk-ingestor} by {availability-zone,name}.as_count()",
            "type": "line"
          }
        ]
      },
      "title": "ingestor elb connections"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:aws.ebs.volume_read_ops{deployment:cf-elk-3az} by {job,index}",
            "type": "line"
          },
          {
            "q": "avg:aws.ebs.volume_write_ops{deployment:cf-elk-3az} by {job,index}",
            "type": "line"
          }
        ]
      },
      "title": "iops by job"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:aws.ebs.volume_total_read_time{deployment:cf-elk-3az} by {job,index}",
            "type": "line"
          },
          {
            "q": "avg:aws.ebs.volume_total_write_time{deployment:cf-elk-3az} by {job,index}",
            "type": "line"
          }
        ]
      },
      "title": "io latency"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.mem.percent{deployment:cf-elk-3az} by {job,index}",
            "type": "line"
          }
        ]
      },
      "title": "mem %"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.disk.persistent.percent{deployment:cf-elk-3az} by {job,index}",
            "conditional_formats": [

            ],
            "type": "line"
          }
        ],
        "markers": [
          {
            "type": "error dashed",
            "value": "y = 90",
            "val": "90"
          }
        ]
      },
      "title": "disk %"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "ewma_5(avg:elasticsearch.docs.incomingRatePerSecond{deployment:cf-elk-3az})",
            "conditional_formats": [

            ],
            "type": "line"
          }
        ],
        "yaxis": {
          "max": 20000,
          "min": 1
        }
      },
      "title": "es in coming log/s"
    }
  ],
  "id": 82847
}