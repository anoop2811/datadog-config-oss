{
  "graphs": [
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "sum:cf.collector.reservable_stagers{deployment:<%= deployment %>}"
          }
        ],
        "events": [

        ],
        "yaxis": {
        }
      },
      "title": "Reservable Stagers"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "cloudops_tools.dea_monitor.reservable_stagers_aggregate{*}*100"
          }
        ],
        "events": [

        ],
        "yaxis": {
        }
      },
      "title": "Percentage of Runners with > 4gb Reservable Stagers"
    },
    {
      "definition": {
        "viz": "distribution",
        "requests": [
          {
            "q": "min:cf.collector.reservable_stagers{*} by {ip}",
            "type": "area"
          }
        ],
        "events": [

        ]
      },
      "title": "Current distribution of Reservable Stagers by IP"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "sum:cf.collector.dea_registry_born{deployment:<%= deployment %>}"
          },
          {
            "q": "sum:cf.collector.dea_registry_running{deployment:<%= deployment %>}"
          },
          {
            "q": "sum:cf.collector.dea_registry_crashed{deployment:<%= deployment %>}"
          },
          {
            "q": "sum:cf.collector.dea_registry_deleted{deployment:<%= deployment %>}"
          },
          {
            "q": "sum:cf.collector.dea_registry_started{deployment:<%= deployment %>}"
          },
          {
            "q": "sum:cf.collector.dea_registry_stopped{deployment:<%= deployment %>}"
          },
          {
            "q": "sum:cf.collector.dea_registry_stopping{deployment:<%= deployment %>}"
          },
          {
            "q": "sum:cf.collector.dea_registry_starting{deployment:<%= deployment %>}"
          },
          {
            "q": "sum:cf.collector.dea_registry_resuming{deployment:<%= deployment %>}"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          },
          {
            "q": "tags:deployment:<%= environment %> end_deploy"
          }
        ],
        "yaxis": {
        }
      },
      "title": "State of Apps"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:cf.collector.available_disk_ratio{deployment:<%= deployment %>,job:dea} by {ip}",
            "type": "area"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ],
        "yaxis": {
        }
      },
      "title": "Avg of total DEAs ratio of disk available"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "bosh.healthmonitor.system.cpu.user{deployment:<%= deployment %>,job:runner_z1} by {index}",
            "stacked": false
          },
          {
            "q": "bosh.healthmonitor.system.cpu.user{deployment:<%= deployment %>,job:runner_z2} by {index}",
            "stacked": false
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          },
          {
            "q": "tags:deployment:<%= environment %> end_deploy"
          }
        ],
        "yaxis": {
        }
      },
      "title": "DEA User CPU"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "bosh.healthmonitor.system.cpu.sys{deployment:<%= deployment %>,job:runner_z1} by {index}",
            "stacked": false
          },
          {
            "q": "bosh.healthmonitor.system.cpu.sys{deployment:<%= deployment %>,job:runner_z2} by {index}",
            "stacked": false
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          },
          {
            "q": "tags:deployment:<%= environment %> end_deploy"
          }
        ],
        "yaxis": {
        }
      },
      "title": "DEA System CPU"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:cf.collector.dea_registry_mem_reserved{deployment:<%= deployment %>} by {ip}"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          },
          {
            "q": "tags:deployment:<%= environment %> end_deploy"
          }
        ],
        "yaxis": {
        }
      },
      "title": "Reserved Memory"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:cf.collector.dea_registry_disk_reserved{deployment:<%= deployment %>} by {ip}"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          },
          {
            "q": "tags:deployment:<%= environment %> end_deploy"
          }
        ],
        "yaxis": {
        }
      },
      "title": "Reserved Disk"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:cf.collector.total_warden_response_time_in_ms{deployment:<%= deployment %>} by {ip} / avg:cf.collector.warden_request_count{deployment:<%= deployment %>} by {ip}",
            "stacked": false
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          },
          {
            "q": "tags:deployment:<%= environment %> end_deploy"
          }
        ],
        "yaxis": {
        }
      },
      "title": "Average Warden Response Time to DEA"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "(avg:app_benchmarking.rest_of_time{deployment:<%= deployment %>} by {status})/1000000, (avg:app_benchmarking.time_in_gorouter{deployment:<%= deployment %>} by {status})/1000000, (avg:app_benchmarking.time_in_app{deployment:<%= deployment %>} by {status})/1000000",
            "type": "bars"
          },
          {
            "q": "ewma_20(avg:app_benchmarking.total_roundtrip{deployment:<%= deployment %>} by {status})/1000000",
            "style": {
              "palette": "warm"
            },
            "type": "line"
          }
        ],
        "outliers": "1%",
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          },
          {
            "q": "tags:deployment:<%= environment %> end_deploy"
          }
        ],
        "yaxis": {
          "filter": "1%"
        }
      },
      "title": "App request roundtrip (ms)"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "max:cloudops_tools.failed_stages.counts_per_5min{*}",
            "type": "line"
          }
        ],
        "events": [

        ],
        "yaxis": {
        }
      },
      "title": "App Staging Failed"
    }
  ],
  "description": "created by vkelkar@pivotal.io",
  "id": 54107,
  "title": "<%= environment %> DEA-Monitor"
}