{
  "graphs": [
    {
      "definition": {
        "requests": [
          {
            "q": "sum:cf.collector.running.running_instances{deployment:<%= deployment %>}"
          }
        ],
        "events": [
          <%= default_events_json %>
        ]
      },
      "title": "Number of running application instances"
    },
    {
      "definition": {
        "requests": [
          {
            "q": "sum:cf.collector.running.missing_instances{deployment:<%= deployment %>}"
          }
        ],
        "events": [
          <%= default_events_json %>
        ]
      },
      "title": "Number of missing application instances"
    },
    {
      "definition": {
        "requests": [
          {
            "q": "sum:cf.collector.running.crashes{deployment:<%= deployment %>}"
          }
        ],
        "events": [
          <%= default_events_json %>
        ]
      },
      "title": "Number of crashed application instances"
    },
    {
      "definition": {
        "requests": [
          {
            "q": "sum:cf.collector.running.flapping_instances{deployment:<%= deployment %>}"
          }
        ],
        "events": [
          <%= default_events_json %>
        ]
      },
      "title": "Number of flapping application instances"
    },
    {
      "definition": {
        "events": [
          <%= default_events_json %>
        ],
        "requests": [
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfAppsWithAllInstancesReporting{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfAppsWithMissingInstances{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfCrashedIndices{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfCrashedInstances{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfUndesiredRunningApps{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfMissingIndices{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfRunningInstances{deployment:<%= deployment %>}"
          }
        ],
        "viz": "timeseries"
      },
      "title": "All HM9000 Metrics"
    },
    {
      "definition": {
        "events": [
          <%= default_events_json %>
        ],
        "requests": [
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfAppsWithAllInstancesReporting{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfRunningInstances{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfDesiredApps{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfDesiredInstances{deployment:<%= deployment %>}"
          },
          {
            "q": "sum:cf.collector.dea_registry_running{deployment:<%= deployment %>} + sum:cf.collector.dea_registry_starting{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfDesiredAppsPendingStaging{deployment:<%= deployment %>}"
          }
        ],
        "viz": "timeseries"
      },
      "title": "Apps w/ All Inst. Reporting (blue), Running Instances (purple), Desired Apps (yellow), Desired Instances (black)"
    },
    {
      "definition": {
        "events": [
          <%= default_events_json %>
        ],
        "requests": [
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfAppsWithMissingInstances{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfMissingIndices{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfUndesiredRunningApps{deployment:<%= deployment %>}"
          }
        ],
        "viz": "timeseries"
      },
      "title": "# Apps with Missing Instances (blue), # of Missing Indices (purple) & # Undesired Apps (yellow)"
    },
    {
      "definition": {
        "events": [
          <%= default_events_json %>
        ],
        "requests": [
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfCrashedIndices{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.NumberOfCrashedInstances{deployment:<%= deployment %>}"
          }
        ],
        "viz": "timeseries"
      },
      "title": "# of Crashed Indices (blue) & # of Crashed Instances (purple)"
    },
    {
      "definition": {
        "events": [
          <%= default_events_json %>
        ],
        "requests": [
          {
            "q": "per_minute(cf.collector.HM9000.HM9000.StartCrashed{deployment:<%= deployment %>})"
          },
          {
            "q": "per_minute(cf.collector.HM9000.HM9000.StartEvacuating{deployment:<%= deployment %>})"
          },
          {
            "q": "per_minute(cf.collector.HM9000.HM9000.StartMissing{deployment:<%= deployment %>})"
          },
          {
            "q": "per_minute(cf.collector.HM9000.HM9000.StopDuplicate{deployment:<%= deployment %>})"
          },
          {
            "q": "per_minute(cf.collector.HM9000.HM9000.StopExtra{deployment:<%= deployment %>})"
          },
          {
            "q": "per_minute(cf.collector.HM9000.HM9000.StopEvacuationComplete{deployment:<%= deployment %>})"
          }
        ],
        "viz": "timeseries"
      },
      "title": "HM9000 Messages Sent per Minute"
    },
    {
      "definition": {
        "events": [
          <%= default_events_json %>
        ],
        "requests": [
          {
            "q": "cf.collector.HM9000.HM9000.DesiredStateSyncTimeInMilliseconds{deployment:<%= deployment %>}"
          }
        ],
        "viz": "timeseries"
      },
      "title": "HM9000 Desired State Fetcher Sync Time (Milliseconds: lower is better)"
    },
    {
      "definition": {
        "events": [
          <%= default_events_json %>
        ],
        "requests": [
          {
            "q": "cf.collector.HM9000.HM9000.ActualStateListenerStoreUsagePercentage{deployment:<%= deployment %>}"
          }
        ],
        "viz": "timeseries"
      },
      "title": "HM9000 Actual State Listener Datastore Load (Percentage: lower is better)"
    },
    {
      "definition": {
        "events": [
          <%= default_events_json %>
        ],
        "requests": [
          {
            "q": "cf.collector.HM9000.HM9000.ReceivedHeartbeats{deployment:<%= deployment %>}"
          },
          {
            "q": "cf.collector.HM9000.HM9000.SavedHeartbeats{deployment:<%= deployment %>}"
          }
        ],
        "viz": "timeseries"
      },
      "title": "HM9000 Received Heartbeats (blue) & Saved Heartbeats (purple)"
    },
    {
      "definition": {
        "events": [
          <%= default_events_json %>
        ],
        "requests": [
          {
            "q": "cf.collector.HM9000.HM9000.ReceivedHeartbeats{deployment:<%= deployment %>} - cf.collector.HM9000.HM9000.SavedHeartbeats{deployment:<%= deployment %>}"
          }
        ],
        "viz": "timeseries"
      },
      "title": "HM9000 Received Heartbeats - Saved Heartbeats"
    }
  ],
  "description": "This dashboard shows a high level overview of the health of the applications on the system.",
  "title": "<%= environment %> Application Instance Health"
}
