{
  "graphs": [
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:cloudops_tools.stages.counts_per_5min{deployment:<%= environment %>} , avg:cloudops_tools.failed_stages.counts_per_5min{deployment:<%= environment %>}",
            "style": {
              "palette": "orange"
            },
            "type": "line"
          }
        ],
        "events": [
          {
            "q": "update deployment for '<%= deployment %>'"
          }
        ]
      },
      "title": "Stages (orange), Failed stages (red), per 5 min"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "avg:cf.collector.dea_registry_evacuating{*} by {ip,name}",
            "style": {
              "palette": "dog_classic"
            },
            "type": "bars"
          }
        ]
      },
      "title": "Avg of cf.collector.dea_registry_evacuating over * by ip,name"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:cf.collector.dea_registry_starting{*} by {ip,name}",
            "style": {
              "palette": "dog_classic"
            },
            "type": "bars"
          }
        ]
      },
      "title": "Avg of cf.collector.dea_registry_starting over * by ip,name"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:cf.collector.dea_registry_stopping{*} by {ip,job,index}",
            "style": {
              "palette": "dog_classic"
            },
            "type": "bars"
          }
        ]
      },
      "title": "Avg of cf.collector.dea_registry_stopping over * by ip,job,index"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "avg:cf.collector.dea_registry_running{*} by {ip,index,job}",
            "style": {
              "palette": "dog_classic"
            },
            "type": "bars"
          }
        ]
      },
      "title": "Avg of cf.collector.dea_registry_running over * by ip,index,job"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "avg:cf.collector.mem_free_bytes{job:dea} by {name}"
          }
        ],
        "events": [
          {
            "q": "update deployment for '<%= deployment %>'"
          }
        ]
      },
      "title": "Avg of cf.collector.mem_free_bytes over job:dea by name"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.mem.kb{job:runner_z1} by {index} , bosh.healthmonitor.system.mem.kb{job:runner_z2} by {index}"
          }
        ]
      },
      "title": "Avg of bosh.healthmonitor.system.mem.kb over job:runner_z1 by index"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.mem.percent{job:runner_z1} by {index} , bosh.healthmonitor.system.mem.percent{job:runner_z2} by {index}"
          }
        ]
      },
      "title": "Avg of bosh.healthmonitor.system.mem.percent over job:runner_z1 by index"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "(avg:bosh.healthmonitor.system.swap.kb{job:runner_z1} by {index,job}) * 1024 , (avg:bosh.healthmonitor.system.swap.kb{job:runner_z2} by {index,job}) * 1024",
            "style": {
              "palette": "warm"
            }
          }
        ]
      },
      "title": "Swap usage in bytes"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.cpu.wait{job:runner_z1} by {index} , avg:bosh.healthmonitor.system.cpu.wait{job:runner_z2} by {index}",
            "style": {
              "palette": "warm"
            },
            "type": "line"
          }
        ],
        "yaxis": {
          "max": 100,
          "scale": "linear",
          "min": 0
        }
      },
      "title": "CPU wait by percents"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.cpu.sys{job:runner_z1} by {index} , bosh.healthmonitor.system.cpu.sys{job:runner_z2} by {index}",
            "style": {
              "palette": "cool"
            }
          }
        ]
      },
      "title": "Avg of bosh.healthmonitor.system.cpu.sys over job:runner_z1 by index"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.cpu.user{job:runner_z1} by {index} , avg:bosh.healthmonitor.system.cpu.user{job:runner_z2} by {index}",
            "style": {
              "palette": "cool"
            }
          }
        ]
      },
      "title": "Avg of bosh.healthmonitor.system.cpu.user over job:runner_z1 by index"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
            "q": "avg:bosh.healthmonitor.system.load.1m{job:runner_z1} by {index} , bosh.healthmonitor.system.load.1m{job:runner_z2} by {index}",
            "style": {
              "palette": "purple"
            }
          }
        ]
      },
      "title": "Avg of bosh.healthmonitor.system.load.1m over job:runner_z1 by index"
    }
  ],
  "description": "Dea System Metrics",
  "title": "DEA System Metrics"
}
